function weight(x){ return 2097152 * x.network_depth + 256 * x.total_gates + 256 * x.network_size + x.preprocess_weight;}var pre_profile = { 'code':
{"source_file":"//! Obsidian Relay - Encrypted MPC Instructions\n//!\n//! This module contains all MPC instructions that run inside Arcium's\n//! Multi-party eXecution Environment (MXE). The relay CANNOT see any\n//! of the values processed here - only the final revealed outputs.\n\nuse arcis_imports::*;\n\n#[encrypted]\nmod circuits {\n    use arcis_imports::*;\n\n    /// Batch statistics - simple counters\n    pub struct BatchStats {\n        /// Total USDC across all orders\n        pub total_usdc: u64,\n        /// Number of orders\n        pub order_count: u8,\n    }\n\n    /// Single order data\n    pub struct OrderData {\n        /// USDC amount in atomic units\n        pub usdc_amount: u64,\n        /// Destination wallet low bits\n        pub wallet_lo: u128,\n        /// Destination wallet high bits\n        pub wallet_hi: u128,\n    }\n\n    /// Initialize batch statistics.\n    #[instruction]\n    pub fn init_batch(mxe: Mxe) -> Enc<Mxe, BatchStats> {\n        let stats = BatchStats {\n            total_usdc: 0,\n            order_count: 0,\n        };\n        mxe.from_arcis(stats)\n    }\n\n    /// Add an order's amount to the batch total.\n    /// The individual order amount stays hidden - only the total is tracked.\n    #[instruction]\n    pub fn add_to_batch(\n        usdc_amount: Enc<Shared, u64>,\n        stats_ctxt: Enc<Mxe, BatchStats>,\n    ) -> Enc<Mxe, BatchStats> {\n        let amount = usdc_amount.to_arcis();\n        let mut stats = stats_ctxt.to_arcis();\n\n        stats.total_usdc = stats.total_usdc + amount;\n        stats.order_count = stats.order_count + 1;\n\n        stats_ctxt.owner.from_arcis(stats)\n    }\n\n    /// Reveal batch total for DFlow execution.\n    /// This is the ONLY information revealed to the relay.\n    #[instruction]\n    pub fn reveal_batch_total(stats_ctxt: Enc<Mxe, BatchStats>) -> (u64, u8) {\n        let stats = stats_ctxt.to_arcis();\n        (stats.total_usdc.reveal(), stats.order_count.reveal())\n    }\n\n    /// Compute pro-rata share allocation for an order.\n    /// order_amount is encrypted (relay can't see it).\n    /// Returns revealed share amount and wallet.\n    #[instruction]\n    pub fn compute_distribution(\n        order_amount: Enc<Shared, u64>,\n        wallet_lo: Enc<Shared, u128>,\n        wallet_hi: Enc<Shared, u128>,\n        batch_total: u64,      // Plaintext - already revealed\n        total_shares: u64,     // Plaintext - from DFlow execution\n    ) -> (u64, u128, u128) {\n        let amount = order_amount.to_arcis();\n        let w_lo = wallet_lo.to_arcis();\n        let w_hi = wallet_hi.to_arcis();\n\n        // shares = (order_amount / batch_total) * total_shares\n        let shares = if batch_total > 0 {\n            ((amount as u128) * (total_shares as u128) / (batch_total as u128)) as u64\n        } else {\n            0u64\n        };\n\n        (shares.reveal(), w_lo.reveal(), w_hi.reveal())\n    }\n\n    /// Simple test - add two numbers in MPC\n    #[instruction]\n    pub fn test_add(a: Enc<Shared, u64>, b: u64) -> u64 {\n        let a = a.to_arcis();\n        (a + b).reveal()\n    }\n\n    /// Another test - multiply in MPC\n    #[instruction]\n    pub fn test_multiply(a: Enc<Shared, u64>, b: Enc<Shared, u64>) -> u64 {\n        let a = a.to_arcis();\n        let b = b.to_arcis();\n        (a * b).reveal()\n    }\n}\n","code":[{"code":"0","region":{"Known":[{"line":34,"column":24},{"line":34,"column":25}]}},{"code":"0","region":{"Known":[{"line":35,"column":25},{"line":35,"column":26}]}},{"code":"let stats = BatchStats { total_usdc : 0, order_count : 0, };","region":{"Known":[{"line":33,"column":8},{"line":36,"column":10}]}},{"code":"stats","region":{"Known":[{"line":37,"column":23},{"line":37,"column":28}]}},{"code":"self.nonce += 1;","region":"Unknown"},{"code":"self","region":"Unknown"},{"code":"a","region":"Unknown"},{"code":"a","region":"Unknown"},{"code":"self.from_arcis_inner(a)","region":"Unknown"},{"code":"a","region":"Unknown"},{"code":"let phantom = [a; 0];","region":"Unknown"},{"code":"data","region":"Unknown"},{"code":"phantom","region":"Unknown"},{"code":"let data = EncData { data, phantom };","region":"Unknown"},{"code":"owner","region":"Unknown"},{"code":"data","region":"Unknown"},{"code":"Self { owner, data }","region":"Unknown"},{"code":"Enc :: new_inner(self, a, self.from_arcis_inner(a))","region":"Unknown"},{"code":"mxe.from_arcis(stats)","region":{"Known":[{"line":37,"column":8},{"line":37,"column":29}]}},{"code":"self.owner","region":"Unknown"},{"code":"self.data","region":"Unknown"},{"code":"Self :: __arcis_inner(self.owner, self.data)","region":"Unknown"},{"code":"let amount = usdc_amount.to_arcis();","region":{"Known":[{"line":47,"column":8},{"line":47,"column":44}]}},{"code":"let mut stats = stats_ctxt.to_arcis();","region":{"Known":[{"line":48,"column":8},{"line":48,"column":46}]}},{"code":"stats.total_usdc = stats.total_usdc + amount;","region":{"Known":[{"line":50,"column":8},{"line":50,"column":53}]}},{"code":"stats.order_count = stats.order_count + 1;","region":{"Known":[{"line":51,"column":8},{"line":51,"column":50}]}},{"code":"stats","region":{"Known":[{"line":53,"column":36},{"line":53,"column":41}]}},{"code":"stats_ctxt.owner.from_arcis(stats)","region":{"Known":[{"line":53,"column":8},{"line":53,"column":42}]}},{"code":"let stats = stats_ctxt.to_arcis();","region":{"Known":[{"line":60,"column":8},{"line":60,"column":42}]}},{"code":"stats.total_usdc.reveal()","region":{"Known":[{"line":61,"column":9},{"line":61,"column":34}]}},{"code":"stats.order_count.reveal()","region":{"Known":[{"line":61,"column":36},{"line":61,"column":62}]}},{"code":"(stats.total_usdc.reveal(), stats.order_count.reveal())","region":{"Known":[{"line":61,"column":8},{"line":61,"column":63}]}},{"code":"let amount = order_amount.to_arcis();","region":{"Known":[{"line":75,"column":8},{"line":75,"column":45}]}},{"code":"let w_lo = wallet_lo.to_arcis();","region":{"Known":[{"line":76,"column":8},{"line":76,"column":40}]}},{"code":"let w_hi = wallet_hi.to_arcis();","region":{"Known":[{"line":77,"column":8},{"line":77,"column":40}]}},{"code":"batch_total > 0","region":{"Known":[{"line":80,"column":24},{"line":80,"column":39}]}},{"code":"0u64","region":{"Known":[{"line":83,"column":12},{"line":83,"column":16}]}},{"code":"amount as u128","region":{"Known":[{"line":81,"column":14},{"line":81,"column":28}]}},{"code":"total_shares as u128","region":{"Known":[{"line":81,"column":33},{"line":81,"column":53}]}},{"code":"batch_total as u128","region":{"Known":[{"line":81,"column":58},{"line":81,"column":77}]}},{"code":"(amount as u128) * (total_shares as u128) / (batch_total as u128)","region":{"Known":[{"line":81,"column":13},{"line":81,"column":78}]}},{"code":"((amount as u128) * (total_shares as u128) / (batch_total as u128)) as u64","region":{"Known":[{"line":81,"column":12},{"line":81,"column":86}]}},{"code":"let shares = if batch_total > 0\n{ ((amount as u128) * (total_shares as u128) / (batch_total as u128)) as u64 }\nelse { 0u64 };","region":{"Known":[{"line":80,"column":8},{"line":84,"column":10}]}},{"code":"shares.reveal()","region":{"Known":[{"line":86,"column":9},{"line":86,"column":24}]}},{"code":"w_lo.reveal()","region":{"Known":[{"line":86,"column":26},{"line":86,"column":39}]}},{"code":"w_hi.reveal()","region":{"Known":[{"line":86,"column":41},{"line":86,"column":54}]}},{"code":"(shares.reveal(), w_lo.reveal(), w_hi.reveal())","region":{"Known":[{"line":86,"column":8},{"line":86,"column":55}]}},{"code":"let a = a.to_arcis();","region":{"Known":[{"line":92,"column":8},{"line":92,"column":29}]}},{"code":"a + b","region":{"Known":[{"line":93,"column":9},{"line":93,"column":14}]}},{"code":"(a + b).reveal()","region":{"Known":[{"line":93,"column":8},{"line":93,"column":24}]}},{"code":"let a = a.to_arcis();","region":{"Known":[{"line":99,"column":8},{"line":99,"column":29}]}},{"code":"let b = b.to_arcis();","region":{"Known":[{"line":100,"column":8},{"line":100,"column":29}]}},{"code":"a * b","region":{"Known":[{"line":101,"column":9},{"line":101,"column":14}]}},{"code":"(a * b).reveal()","region":{"Known":[{"line":101,"column":8},{"line":101,"column":24}]}}]}
, 'instructions':
{"init_batch":{"profilees":[{"code_idx":0,"before_size_id":0,"after_size_id":0},{"code_idx":1,"before_size_id":0,"after_size_id":0},{"code_idx":2,"before_size_id":0,"after_size_id":0},{"code_idx":3,"before_size_id":0,"after_size_id":0},{"code_idx":4,"before_size_id":0,"after_size_id":1},{"code_idx":5,"before_size_id":1,"after_size_id":1},{"code_idx":6,"before_size_id":1,"after_size_id":1},{"code_idx":7,"before_size_id":1,"after_size_id":1},{"code_idx":8,"before_size_id":1,"after_size_id":2},{"code_idx":9,"before_size_id":2,"after_size_id":2},{"code_idx":10,"before_size_id":2,"after_size_id":2},{"code_idx":11,"before_size_id":2,"after_size_id":2},{"code_idx":12,"before_size_id":2,"after_size_id":2},{"code_idx":13,"before_size_id":2,"after_size_id":2},{"code_idx":14,"before_size_id":2,"after_size_id":2},{"code_idx":15,"before_size_id":2,"after_size_id":2},{"code_idx":16,"before_size_id":2,"after_size_id":2},{"code_idx":17,"before_size_id":1,"after_size_id":2},{"code_idx":18,"before_size_id":0,"after_size_id":2}]},"add_to_batch":{"profilees":[{"code_idx":19,"before_size_id":0,"after_size_id":0},{"code_idx":20,"before_size_id":0,"after_size_id":1},{"code_idx":21,"before_size_id":0,"after_size_id":2},{"code_idx":22,"before_size_id":0,"after_size_id":2},{"code_idx":19,"before_size_id":2,"after_size_id":2},{"code_idx":20,"before_size_id":2,"after_size_id":2},{"code_idx":21,"before_size_id":2,"after_size_id":3},{"code_idx":23,"before_size_id":2,"after_size_id":3},{"code_idx":24,"before_size_id":3,"after_size_id":4},{"code_idx":25,"before_size_id":4,"after_size_id":5},{"code_idx":26,"before_size_id":5,"after_size_id":5},{"code_idx":4,"before_size_id":5,"after_size_id":6},{"code_idx":5,"before_size_id":6,"after_size_id":6},{"code_idx":6,"before_size_id":6,"after_size_id":6},{"code_idx":7,"before_size_id":6,"after_size_id":6},{"code_idx":8,"before_size_id":6,"after_size_id":7},{"code_idx":9,"before_size_id":7,"after_size_id":7},{"code_idx":10,"before_size_id":7,"after_size_id":7},{"code_idx":11,"before_size_id":7,"after_size_id":7},{"code_idx":12,"before_size_id":7,"after_size_id":7},{"code_idx":13,"before_size_id":7,"after_size_id":7},{"code_idx":14,"before_size_id":7,"after_size_id":7},{"code_idx":15,"before_size_id":7,"after_size_id":7},{"code_idx":16,"before_size_id":7,"after_size_id":7},{"code_idx":17,"before_size_id":6,"after_size_id":7},{"code_idx":27,"before_size_id":5,"after_size_id":7}]},"compute_distribution":{"profilees":[{"code_idx":19,"before_size_id":0,"after_size_id":0},{"code_idx":20,"before_size_id":0,"after_size_id":1},{"code_idx":21,"before_size_id":0,"after_size_id":2},{"code_idx":32,"before_size_id":0,"after_size_id":2},{"code_idx":19,"before_size_id":2,"after_size_id":2},{"code_idx":20,"before_size_id":2,"after_size_id":2},{"code_idx":21,"before_size_id":2,"after_size_id":3},{"code_idx":33,"before_size_id":2,"after_size_id":3},{"code_idx":19,"before_size_id":3,"after_size_id":3},{"code_idx":20,"before_size_id":3,"after_size_id":3},{"code_idx":21,"before_size_id":3,"after_size_id":4},{"code_idx":34,"before_size_id":3,"after_size_id":4},{"code_idx":35,"before_size_id":4,"after_size_id":5},{"code_idx":36,"before_size_id":5,"after_size_id":5},{"code_idx":37,"before_size_id":5,"after_size_id":6},{"code_idx":38,"before_size_id":6,"after_size_id":7},{"code_idx":39,"before_size_id":8,"after_size_id":9},{"code_idx":40,"before_size_id":5,"after_size_id":10},{"code_idx":41,"before_size_id":5,"after_size_id":11},{"code_idx":42,"before_size_id":4,"after_size_id":12},{"code_idx":43,"before_size_id":12,"after_size_id":13},{"code_idx":44,"before_size_id":13,"after_size_id":14},{"code_idx":45,"before_size_id":14,"after_size_id":15},{"code_idx":46,"before_size_id":12,"after_size_id":15}]},"test_add":{"profilees":[{"code_idx":19,"before_size_id":0,"after_size_id":0},{"code_idx":20,"before_size_id":0,"after_size_id":1},{"code_idx":21,"before_size_id":0,"after_size_id":2},{"code_idx":47,"before_size_id":0,"after_size_id":2},{"code_idx":48,"before_size_id":2,"after_size_id":3},{"code_idx":49,"before_size_id":2,"after_size_id":4}]},"reveal_batch_total":{"profilees":[{"code_idx":19,"before_size_id":0,"after_size_id":0},{"code_idx":20,"before_size_id":0,"after_size_id":1},{"code_idx":21,"before_size_id":0,"after_size_id":2},{"code_idx":28,"before_size_id":0,"after_size_id":2},{"code_idx":29,"before_size_id":2,"after_size_id":3},{"code_idx":30,"before_size_id":3,"after_size_id":4},{"code_idx":31,"before_size_id":2,"after_size_id":4}]},"test_multiply":{"profilees":[{"code_idx":19,"before_size_id":0,"after_size_id":0},{"code_idx":20,"before_size_id":0,"after_size_id":1},{"code_idx":21,"before_size_id":0,"after_size_id":2},{"code_idx":50,"before_size_id":0,"after_size_id":2},{"code_idx":19,"before_size_id":2,"after_size_id":2},{"code_idx":20,"before_size_id":2,"after_size_id":2},{"code_idx":21,"before_size_id":2,"after_size_id":3},{"code_idx":51,"before_size_id":2,"after_size_id":3},{"code_idx":52,"before_size_id":3,"after_size_id":4},{"code_idx":53,"before_size_id":3,"after_size_id":5}]}}
, 'instruction_locations':
{"test_add":{"Known":[{"line":90,"column":4},{"line":90,"column":18}]},"test_multiply":{"Known":[{"line":97,"column":4},{"line":97,"column":18}]},"init_batch":{"Known":[{"line":31,"column":4},{"line":31,"column":18}]},"compute_distribution":{"Known":[{"line":67,"column":4},{"line":67,"column":18}]},"add_to_batch":{"Known":[{"line":42,"column":4},{"line":42,"column":18}]},"reveal_batch_total":{"Known":[{"line":58,"column":4},{"line":58,"column":18}]}}
};
